<header class="navbar navbar-default navbar-fixed-top">
  <div class="container">


    <div class="navbar-left">

      <ul class="nav navbar-nav">
        <li>
          <h1>
            <a href="/">Timeline</a>
            <small><app-version></app-version></small>
          </h1>
        </li>
      </ul>


    </div>
    <div class="navbar-right">
      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a class="btn btn-link dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
            Actions
            <span class="caret"></span>
          </a>
          <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">

            <li><a (click)="generateTimeline()" *ngIf="!timelineGenerated">Generate Timeline</a></li>
            <li class="disabled" ><a *ngIf="timelineGenerated">Timeline Generated</a></li>

            <li role="separator" class="divider" *ngIf="timelineGenerated"></li>

            <li><a (click)="groupTracks()" *ngIf="timelineGenerated && !tracksGrouped">Group Tracks</a></li>
            <li class="disabled"><a *ngIf="timelineGenerated && tracksGrouped">Tracks Grouped</a></li>

            <li role="separator" class="divider" *ngIf="timelineGenerated"></li>

            <li><a *ngIf="timelineGenerated" (click)="resetTimeline()">Reset Timeline</a></li>
          </ul>
        </li>
        <li class="dropdown"><mini-user></mini-user></li>
      </ul>
    </div>



  </div>
</header>


<section class="main clearfix">



  <div class="col-xs-8">

    <ul class="list-group" *ngIf="!tracks || !tracks.length">
      <li class="list-group-item empty">Your Timeline will be generated here.</li>
    </ul>



    <ul class="list-group" *ngFor="let group of tracks">
      <li class="list-group-item clearfix" *ngFor="let track of group" (click)="selectTrack(track)">
        <div class="col-xs-9">
          <span class="track-name">{{track.name}}</span>
          <span class="artist-name">{{(track.artists) ? (' - ' + track.artists[0]) : null}}</span>
        </div>
        <div class="col-xs-3 date-label">
          {{track.date_added | date}}
        </div>
      </li>
    </ul>
  </div>

  <div class="col-xs-4 pull-right">
    <div class="panel panel-default">
      <div class="panel-body" [class.hidden]="!selectedTrack">
        <div class="player-frame">
          <iframe id="spotifyPlayer" frameborder="0" allowtransparency="true" width="250" height="80"></iframe>
        </div>
      </div>

      <div class="panel-body" [class.hidden]="selectedTrack">
        <div class="empty">
          Click on a track to preview it here.
        </div>
      </div>
    </div>
  </div>

  <div class="col-xs-4 pull-right">
    <div class="panel panel-default">
      <div class="panel-body">

        <h3>Proximity</h3>

        <div class="row">
          <div class="form-group col-xs-6">
            <label class="sr-only" for="proximityThreshold">Threshold</label>
            <input type="text" class="form-control" id="proximityThreshold" [(ngModel)]="proximityThreshold">
          </div>

          <div class="form-group col-xs-6">
            <label class="sr-only" for="proximityUnit">Unit</label>
            <select class="form-control" [(ngModel)]="proximityUnit" id="proximityUnit">
              <option value="days">days</option>
            </select>
          </div>
        </div>


        <button type="button" class="btn btn-success" (click)="generateTimeline()">Change Grouping</button>
      </div>
    </div>
  </div>


</section>
